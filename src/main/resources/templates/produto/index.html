<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Lista de Produtos</title>
</head>
<body>
    <h2>Lista de Produtos</h2>
    
    <ul id="produtosLista">
        <li th:each="produto : ${produtos}">
            <span th:text="${produto.nome}">Produto</span> - 
            <span th:text="${produto.preco}">Preço</span> 
            <button th:attr="onclick='confirmarDelecao(' + ${produto.id} + ')'">Deletar</button>
        </li>
    </ul>

    <div id="confirmacaoDelecao" style="display:none;">
        <p>Você tem certeza que deseja excluir este produto?</p>
        <button id="confirmarBtn">Confirmar</button>
        <button id="cancelarBtn">Cancelar</button>
    </div>

    <script th:inline="javascript">
        let produtoIdDeletar = null;
		let produtos = /*[[${produtos}]]*/ []; // Lista de produtos
		
        // Função chamada ao clicar no botão de deletar
        function confirmarDelecao(id) {
            produtoIdDeletar = id;
            // Encontrar o produto pelo id na lista
         
            produto = produtos.find(p => p.id === produtoIdDeletar);
            
            if (produto) {
                alert("Produto encontrado: " + produto.nome + " - " + produto.preco);
                // Exibir o modal de confirmação
                document.getElementById('confirmacaoDelecao').style.display = 'block';
            }
        }

        // Confirmar deleção
        document.getElementById('confirmarBtn').addEventListener('click', function() {
            // Remover o produto da lista (simulando a deleção)
            alert('Produto deletado com sucesso!');
            // Fechar o modal
            document.getElementById('confirmacaoDelecao').style.display = 'none';
        });

        // Cancelar deleção
        document.getElementById('cancelarBtn').addEventListener('click', function() {
            // Fechar o modal sem realizar a deleção
            document.getElementById('confirmacaoDelecao').style.display = 'none';
        });
    </script>
</body>
</html>
